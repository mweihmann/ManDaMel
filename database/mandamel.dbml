Project ManDaMel {
  database_type: "MySQL"
  note: "Digital product webshop using JWT auth"
}

Table users {
  id int [pk, increment]
  username varchar [unique, not null]
  email varchar [unique, not null]
  password_hash varchar [not null]
  is_admin boolean [default: false]
  created_at datetime [default: `CURRENT_TIMESTAMP`]
}

Table products {
  id int [pk, increment]
  name varchar [not null]
  description text
  price decimal(10,2) [not null]
  category_id int
  file_path varchar [not null]
  created_at datetime [default: `CURRENT_TIMESTAMP`]

  Note: 'Digital products available for sale'
}

Table categories {
  id int [pk, increment]
  name varchar [unique, not null]
}

Table orders {
  id int [pk, increment]
  user_id int [ref: > users.id]
  total decimal(10,2) [not null]
  created_at datetime [default: `CURRENT_TIMESTAMP`]
}

Table order_items {
  id int [pk, increment]
  order_id int [ref: > orders.id]
  product_id int [ref: > products.id]
  price decimal(10,2) [not null]

  Note: 'Snapshot of product price at the time of order'
}

Table promo_codes {
  id int [pk, increment]
  code varchar [unique, not null]
  discount decimal(10,2) [not null]
  type enum [values: 'fixed', 'percentage']
  expires_at datetime
  usage_limit int

  Note: 'Used to apply discounts to orders'
}

Table refresh_tokens {
  id int [pk, increment]
  user_id int [ref: > users.id]
  token varchar [not null]
  expires_at datetime
}

Ref: products.category_id > categories.id
